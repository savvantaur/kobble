
# Auto-generated at Wed Jul 09 13:12:36 +0100 2008.
# Hand modifications will be overwritten.
# /private/var/www/materialist/config/ultrasphinx/production.base
indexer {
  mem_limit = 256M
}

searchd {
  read_timeout = 5
  max_children = 300
  log = /var/www/materialist/shared/sphinx/log/searchd.log
  port = 8075
  max_matches = 100000
  query_log = /var/www/materialist/shared/sphinx/log/query.log
  seamless_rotate = 1
  pid_file = /var/www/materialist/shared/sphinx/log/searchd.pid
  address = 0.0.0.0
}

# Source configuration

source occasions_main
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM occasions 
sql_query = SELECT (occasions.id * 5 + 0) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, occasions.body AS body, 'Occasion' AS class, 0 AS class_id, occasions.collection_id AS collection_id, UNIX_TIMESTAMP(occasions.created_at) AS created_at, occasions.created_by AS created_by, occasions.description AS description, occasions.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM occasions LEFT OUTER JOIN annotations AS annotations ON occasions.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON occasions.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE occasions.id >= $start AND occasions.id <= $end AND (occasions.deleted_at IS NULL or occasions.deleted_at > NOW()) GROUP BY occasions.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM occasions WHERE occasions.id = (($id - 0) / 5)
}


# Source configuration

source nodes_main
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM nodes 
sql_query = SELECT (nodes.id * 5 + 1) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, nodes.body AS body, 'Node' AS class, 1 AS class_id, nodes.collection_id AS collection_id, UNIX_TIMESTAMP(nodes.created_at) AS created_at, nodes.created_by AS created_by, nodes.description AS description, nodes.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM nodes LEFT OUTER JOIN annotations AS annotations ON nodes.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON nodes.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE nodes.id >= $start AND nodes.id <= $end AND (nodes.deleted_at IS NULL or nodes.deleted_at > NOW()) GROUP BY nodes.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM nodes WHERE nodes.id = (($id - 1) / 5)
}


# Source configuration

source sources_main
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM sources 
sql_query = SELECT (sources.id * 5 + 2) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, sources.body AS body, 'Source' AS class, 2 AS class_id, sources.collection_id AS collection_id, UNIX_TIMESTAMP(sources.created_at) AS created_at, sources.created_by AS created_by, sources.description AS description, sources.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM sources LEFT OUTER JOIN annotations AS annotations ON sources.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON sources.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE sources.id >= $start AND sources.id <= $end AND (sources.deleted_at IS NULL or sources.deleted_at > NOW()) GROUP BY sources.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM sources WHERE sources.id = (($id - 2) / 5)
}


# Source configuration

source bundles_main
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM bundles 
sql_query = SELECT (bundles.id * 5 + 3) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, bundles.body AS body, 'Bundle' AS class, 3 AS class_id, bundles.collection_id AS collection_id, UNIX_TIMESTAMP(bundles.created_at) AS created_at, bundles.created_by AS created_by, bundles.description AS description, bundles.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM bundles LEFT OUTER JOIN annotations AS annotations ON bundles.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON bundles.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE bundles.id >= $start AND bundles.id <= $end AND (bundles.deleted_at IS NULL or bundles.deleted_at > NOW()) GROUP BY bundles.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM bundles WHERE bundles.id = (($id - 3) / 5)
}


# Source configuration

source topics_main
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM topics 
sql_query = SELECT (topics.id * 5 + 4) AS id, '' AS annotations, topics.body AS body, 'Topic' AS class, 4 AS class_id, topics.collection_id AS collection_id, UNIX_TIMESTAMP(topics.created_at) AS created_at, topics.created_by AS created_by, '' AS description, topics.name AS name, '' AS topics FROM topics WHERE topics.id >= $start AND topics.id <= $end AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) GROUP BY topics.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM topics WHERE topics.id = (($id - 4) / 5)
}


# Index configuration

index main
{
  source = bundles_main
  source = nodes_main
  source = occasions_main
  source = sources_main
  source = topics_main
  charset_type = utf-8
  html_index_attrs = 
  charset_table = 0..9, A..Z->a..z, -, _, ., &, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F,U+C5->U+E5, U+E5, U+C4->U+E4, U+E4, U+D6->U+F6, U+F6, U+16B, U+0c1->a, U+0c4->a, U+0c9->e, U+0cd->i, U+0d3->o, U+0d4->o, U+0da->u, U+0dd->y, U+0e1->a, U+0e4->a, U+0e9->e, U+0ed->i, U+0f3->o, U+0f4->o, U+0fa->u, U+0fd->y, U+104->U+105, U+105, U+106->U+107, U+10c->c, U+10d->c, U+10e->d, U+10f->d, U+116->U+117, U+117, U+118->U+119, U+11a->e, U+11b->e, U+12E->U+12F, U+12F, U+139->l, U+13a->l, U+13d->l, U+13e->l, U+141->U+142, U+142, U+143->U+144, U+144,U+147->n, U+148->n, U+154->r, U+155->r, U+158->r, U+159->r, U+15A->U+15B, U+15B, U+160->s, U+160->U+161, U+161->s, U+164->t, U+165->t, U+16A->U+16B, U+16B, U+16e->u, U+16f->u, U+172->U+173, U+173, U+179->U+17A, U+17A, U+17B->U+17C, U+17C, U+17d->z, U+17e->z,
  min_word_len = 1
  #   enable_star = 1
  stopwords = 
  html_strip = 0
  path = /var/www/materialist/shared/sphinx//sphinx_index_main
  docinfo = extern
  morphology = stem_en
  #   min_infix_len = 1
}


# Source configuration

source occasions_delta
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM occasions WHERE occasions.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (occasions.id * 5 + 0) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, occasions.body AS body, 'Occasion' AS class, 0 AS class_id, occasions.collection_id AS collection_id, UNIX_TIMESTAMP(occasions.created_at) AS created_at, occasions.created_by AS created_by, occasions.description AS description, occasions.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM occasions LEFT OUTER JOIN annotations AS annotations ON occasions.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON occasions.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE occasions.id >= $start AND occasions.id <= $end AND (occasions.deleted_at IS NULL or occasions.deleted_at > NOW()) AND occasions.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY occasions.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM occasions WHERE occasions.id = (($id - 0) / 5)
}


# Source configuration

source nodes_delta
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM nodes WHERE nodes.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (nodes.id * 5 + 1) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, nodes.body AS body, 'Node' AS class, 1 AS class_id, nodes.collection_id AS collection_id, UNIX_TIMESTAMP(nodes.created_at) AS created_at, nodes.created_by AS created_by, nodes.description AS description, nodes.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM nodes LEFT OUTER JOIN annotations AS annotations ON nodes.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON nodes.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE nodes.id >= $start AND nodes.id <= $end AND (nodes.deleted_at IS NULL or nodes.deleted_at > NOW()) AND nodes.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY nodes.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM nodes WHERE nodes.id = (($id - 1) / 5)
}


# Source configuration

source sources_delta
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM sources WHERE sources.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (sources.id * 5 + 2) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, sources.body AS body, 'Source' AS class, 2 AS class_id, sources.collection_id AS collection_id, UNIX_TIMESTAMP(sources.created_at) AS created_at, sources.created_by AS created_by, sources.description AS description, sources.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM sources LEFT OUTER JOIN annotations AS annotations ON sources.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON sources.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE sources.id >= $start AND sources.id <= $end AND (sources.deleted_at IS NULL or sources.deleted_at > NOW()) AND sources.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY sources.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM sources WHERE sources.id = (($id - 2) / 5)
}


# Source configuration

source bundles_delta
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM bundles WHERE bundles.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (bundles.id * 5 + 3) AS id, CAST(GROUP_CONCAT(DISTINCT annotations.body  SEPARATOR ' ') AS CHAR) AS annotations, bundles.body AS body, 'Bundle' AS class, 3 AS class_id, bundles.collection_id AS collection_id, UNIX_TIMESTAMP(bundles.created_at) AS created_at, bundles.created_by AS created_by, bundles.description AS description, bundles.name AS name, CAST(GROUP_CONCAT(DISTINCT topics.body  SEPARATOR ' ') AS CHAR) AS topics FROM bundles LEFT OUTER JOIN annotations AS annotations ON bundles.id = annotations.annotated_id AND (annotations.deleted_at IS NULL or annotations.deleted_at > NOW()) LEFT OUTER JOIN topics AS topics ON bundles.id = topics.referent_id AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) WHERE bundles.id >= $start AND bundles.id <= $end AND (bundles.deleted_at IS NULL or bundles.deleted_at > NOW()) AND bundles.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY bundles.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM bundles WHERE bundles.id = (($id - 3) / 5)
}


# Source configuration

source topics_delta
{
  sql_range_step = 5000
  sql_query_post = 
  sql_ranged_throttle = 0

      type = mysql
      sql_query_pre = SET SESSION group_concat_max_len = 65535
      sql_query_pre = SET NAMES utf8
    
sql_db = materialist_production
sql_host = eccles.spanner.org
sql_pass = monkey
sql_user = spanner
sql_query_range = SELECT MIN(id) , MAX(id) FROM topics WHERE topics.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND)
sql_query = SELECT (topics.id * 5 + 4) AS id, '' AS annotations, topics.body AS body, 'Topic' AS class, 4 AS class_id, topics.collection_id AS collection_id, UNIX_TIMESTAMP(topics.created_at) AS created_at, topics.created_by AS created_by, '' AS description, topics.name AS name, '' AS topics FROM topics WHERE topics.id >= $start AND topics.id <= $end AND (topics.deleted_at IS NULL or topics.deleted_at > NOW()) AND topics.updated_at > DATE_SUB(NOW(), INTERVAL 88200 SECOND) GROUP BY topics.id

sql_attr_uint = class_id
sql_attr_uint = collection_id
sql_attr_timestamp = created_at
sql_attr_uint = created_by
sql_query_info = SELECT * FROM topics WHERE topics.id = (($id - 4) / 5)
}


# Index configuration

index delta
{
  source = bundles_delta
  source = nodes_delta
  source = occasions_delta
  source = sources_delta
  source = topics_delta
  charset_type = utf-8
  html_index_attrs = 
  charset_table = 0..9, A..Z->a..z, -, _, ., &, a..z, U+410..U+42F->U+430..U+44F, U+430..U+44F,U+C5->U+E5, U+E5, U+C4->U+E4, U+E4, U+D6->U+F6, U+F6, U+16B, U+0c1->a, U+0c4->a, U+0c9->e, U+0cd->i, U+0d3->o, U+0d4->o, U+0da->u, U+0dd->y, U+0e1->a, U+0e4->a, U+0e9->e, U+0ed->i, U+0f3->o, U+0f4->o, U+0fa->u, U+0fd->y, U+104->U+105, U+105, U+106->U+107, U+10c->c, U+10d->c, U+10e->d, U+10f->d, U+116->U+117, U+117, U+118->U+119, U+11a->e, U+11b->e, U+12E->U+12F, U+12F, U+139->l, U+13a->l, U+13d->l, U+13e->l, U+141->U+142, U+142, U+143->U+144, U+144,U+147->n, U+148->n, U+154->r, U+155->r, U+158->r, U+159->r, U+15A->U+15B, U+15B, U+160->s, U+160->U+161, U+161->s, U+164->t, U+165->t, U+16A->U+16B, U+16B, U+16e->u, U+16f->u, U+172->U+173, U+173, U+179->U+17A, U+17A, U+17B->U+17C, U+17C, U+17d->z, U+17e->z,
  min_word_len = 1
  #   enable_star = 1
  stopwords = 
  html_strip = 0
  path = /var/www/materialist/shared/sphinx//sphinx_index_delta
  docinfo = extern
  morphology = stem_en
  #   min_infix_len = 1
}

