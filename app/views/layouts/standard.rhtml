<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html>
<head>
  <title>materiali.st<% if @title %> - <%= @title %><% end%></title>
  <script type="text/javascript" src="/js/mootools.js"></script>
  <script type="text/javascript" src="/js/extensions.js"></script>
  <script type="text/javascript" src="/js/spoke.js"></script>
  <link rel="stylesheet" href="/stylesheets/spoke.css" type="text/css" />
</head>
<body>

  <div id="masthead">
    <p>
      <%= link_to "materialist/", "/" %><br />
      <%= link_to "#{current_user.account.name}/", {:controller => 'accounts', :action => 'home'}, {:class => 'account'} %><br />
    </p>
  </div>
  
  <div id="pagetitle">
    <h1<% if @title && @title.size > 50 %> class="longtitle"<% end %>><%= @title || 'welcome' %></h1>
  </div>

  <div id="canvas">
    <%= yield %>
  </div>

  <div id="mastfoot">
	  <div id="navigation">
      <%= link_to 'home', {:controller => 'accounts', :action => 'home'}, {:class => request.parameters[:action] == 'home' ? " fg" : ''} %>
      <% [Source, Node, Bundle, Person, Tag].each do |klass| %>
        <%= link_to klass.nice_title.pluralize, {:controller => klass.to_s.underscore.pluralize}, {:class => (request.parameters[:controller] == klass.to_s.underscore.pluralize ? "fg" : '')} %>
      <% end %>
      <%= link_to 'search', search_url, {:class => request.parameters[:controller] == 'search' ? " fg" : ''} %>
      <%= link_to 'discussion', {:controller => 'topics', :action => 'index'}, {:class => request.parameters[:controller] == 'topics' ? " fg" : ''} %>
      <%#= link_to 'preferences', {:controller => 'login', :action => 'preferences'} %>
      <%= link_to 'log out', {:controller => 'login', :action => 'logout'}, {:class => 'admin'} %>
    </div>
  </div> 

  <div id="scratchpad" class="fixedright">
    <div id="headbox_scratchpad">
      <% for pad in @scratch %>
        <a href="#" class="padtab" id="tab_scratchpad_<%= pad.id %>"><%= pad.name %></a>
      <% end %>
    </div>
    <div id="box_scratchpad">
      <%= render :partial => 'shared/scratchpad', :collection => @scratch %>
    </div>
  </div>

  <div id="trash" class="trashdrop showondrag" catches="all">
    &nbsp;
  </div>  
   
  <div id="admin" class="hideondrag">
    <%= yield :admin %>
  </div>
   
</body>
</html>